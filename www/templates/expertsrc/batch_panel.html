{% extends "expertsrc/base.html" %}

{% block styles %} 
<link rel="stylesheet" href="/static/css/base/jquery.ui.all.css" type="text/css" media="screen"/>
<style type="text/css" media="screen">
.spin {
    margin-bottom: 20px;
    min-height: 20px;
    padding: 19px;
} 
.button-row {
   padding:20px;
   padding-top:40px;
}
</style>
{% endblock styles %}

{% block title %}Select allocations{% endblock title %}

{% block sidebar %} {% endblock sidebar %}

{% block content %}
<input type="hidden" id="batch_id" value="{{batch.pk}}" />
<div class="span8 offset2">
  <div class="row" style="text-align:center; padding-bottom:30px;">
    <div>
      <h2>Allocate Workers to Your Questions</h2>
    </div> 
  </div>
  <div class="row-fluid">
    <div class="span6">
      <hr />
      Use this panel to select expert workers to answer your questions. We will help by providing suggestions: select the number of answers you want per question, and also your requirements for price and expected confidence.
      
      <div class="row button-row">
	<div class="span6"><a id="get-allocs" class="btn btn-primary btn-large">Get Suggestions</a></div>
	<div id="spinner" class="spin span2 pull-right"></div>
      </div>
      <div class="row span8" style="display:none;" id="alloc-stats">
	<h2>Allocation Stats</h2>
	<br />
	  <p>
	    <span><strong>Average Confidence:</strong><span id="average-confidence" class="pull-right"></span></span>
	  </p>
	  <p>
	    <span><strong>Average Size:</strong><span id="average-alloc-size" class="pull-right"></span></span>
	  </p>
	  <p>
	    <span><strong>Cumulative Price:</strong><span id="cumulative-price" class="pull-right"></span></span>
	  </p>
      </div>
    </div>
    <div class="span6 offset2">
      <form action="#">
	<hr />
	<div class="row-fluid">
	  <div class="control-group">
	    <label for="confidence" class="control-label">Confidence Score:</label>
	    <div class="controls">
	      <input type="text" id="confidence" class="input-mini disabled" disabled/>
	    </div>
	    <div class="span8">
	      <div id="confidence-slider">
	      </div>
	    </div>
	  </div>
	</div>
	<hr />
	<div class="row-fluid">
	  <div class="control-group">
	    <label for="price" class="control-label">Price:</label>
	    <div class="controls">
	      <input type="text" id="price" class="input-mini disabled" disabled/>
	    </div>
	    <div class="span8">
	      <div id="price-slider"></div>
	    </div>
	  </div>
	</div>
	<hr />
	<div class="row-fluid">
	  <div class="control-group span6 pull-left">
	    <label for="amount-min" class="control-label">Min Size:</label>
	    <div class="controls">
	      <input type="text" id="amount-min" class="input-mini disabled" disabled/>
	    </div>
	  </div>
	  <div class="control-group span6 pull-right">
	    <label for="amount-max" class="control-label">Max Size:</label>
	    <div class="controls">
	      <input type="text" id="amount-max" class="input-mini disabled" disabled/>
	    </div>
	  </div>
	  <div class="span8">
	    <div id="alloc-size-slider"></div>
	  </div>
	</div>
      </form>
    </div> 
  </div>
  <hr />
  <div class="row-fluid">
    <div id="questions" class="hide">
      <h2>Questions</h2>
      <table class="table">
	<thead>
	  <tr>
	    <th>#</th>
	    <th>Local Field Name</th>
	    <th>Allocation details</th>
	    <th>Number of workers</th>
	    <th>Expected confidence</th>
	    <th>Price</th>
	  </tr>
      </thead>
      <tbody>
	{% include "expertsrc/allocation_rows.html" %}
      </tbody>
    </table>
      <hr />
      <div class="row">
	<div><a id="commit-allocs" class="btn btn-success btn-large pull-right">Approve</a></div>
      </div>
  </div>
    <div class="alert alert-info" style="display:none;" id="status">
    </div>
    <div class="alert alert-error" style="display:none;" id="error">
    </div>
  </div>
{% endblock content %}

{% block jquery %}
<script type="text/javascript" src="/static/js/jquery.ui.core.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.ui.widget.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.ui.mouse.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.ui.slider.min.js"></script>
<script type="text/javascript" src="/static/js/spin.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/batch_panel.js"></script>
{% endblock jquery %}
