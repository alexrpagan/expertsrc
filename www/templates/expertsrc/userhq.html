{% extends "expertsrc/base.html" %}

{% block styles %}
<style type="text/css" media="screen">
  .info {
     margin:20px;
  }
</style>
{% endblock styles %}

{% block title %}User Information for {{ user.username }} {% endblock title %}

{% block sidebar %}
{% endblock sidebar %}

{% block content %}
<div id="domain-overview" class="span8 offset2">

<div class="row">
  <h1>User Overview</h1>
</div>

<div class="row info">
  <p>Hello, {{ user.username }}. Use this panel to manage your user profile.</p>
</div>


<section id="overview">
  {% if overview %}
  <table class="table">
    <thead>
      <tr>
	<th>Domain</th>
	<th>Quota (q's/week)</th>
	<th>Number answered</th>
	<th>Accuracy</th>
	<th>Level</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in overview %}
      <tr>
	<td>{{ entry.short_name }}</td>
	<td>{{ entry.question_quota }}</td>
	<td>{{ entry.num_answered }}</td>
	<td>{{ entry.accuracy }}</td>
	<td>{{ entry.user_level }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</section>

<section id="user-profile-info">
  <div class="row-fluid">
    <div class="span6">
      <div>
	<h3>Bank Info:</h3>
	<strong>Balance:</strong> {{ profile.bank_balance }} 
      </div>
      <br/>
      <h3>User Profile Info:</h3>
      <form method="post" action="/user/{{ user.username }}/update_profile/">
	{% csrf_token %}
	{{ profile_form.non_field_errors }}
	<div>
	  {{ profile_form.user_class_errors }}
	  <label for="id_user_class"> Role: </label>
	  {{ profile_form.user_class }}
	</div>
	<input type="submit" value="Save User Info" />
      </form>
    </div>

    {% if allow_add_domain %}
    <div class="span6">
      <h3>Add an area of expertise:</h3>
      <form method="post" action="/user/{{ user.username }}/add_expertise/">
	{% csrf_token %}
	{{ expertise_form.as_table }} <br/>
	<input type="submit" value="Add" />
      </form>
    </div>
    {% endif %}
  </div>
</section>

{% endblock content %} 
